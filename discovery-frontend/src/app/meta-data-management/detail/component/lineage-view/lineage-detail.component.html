<!--
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~      http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License.
  -->

<div class="ddp-box-in">
  <a href="javascript:" class="ddp-btn-popup-close" (click)="closeInfo()"></a>

  <div class="ddp-ui-input">
    <div class="ddp-lineage-detail-metadata-name"
         [class.ddp-selected]="isMetadataNameEdit"
         (clickOutside)="isMetadataNameEdit ? setMetadataName(): null;">
      <em class="ddp-icon-file-svg">
      </em>
      <div class="ddp-ui-input">
        <input type="text" #metaName maxlength="150"
               placeholder="metadata name"
               (keyup.enter)="isMetadataNameEdit ? null : null;"
               [(ngModel)]="metadataName" />
        <span class="ddp-btn-check" (click)="$event.stopPropagation(); updateMetadata();"></span>
      </div>
      <span class="ddp-txt-metadataname"
            title="{{selectedNode.metadata.name}}">
        {{selectedNode.metadata.name}}
        <a href="javascript:" class="ddp-link-edit"
           (click)="!isMetadataNameEdit ? onMetadataNameEdit($event):$event.stopPropagation();">
          <em class="ddp-icon-edit2"></em>
        </a>
      </span>
    </div>
  </div>

  <div class="ddp-ui-databuttons ddp-type">
    <div class="ddp-databuttons ddp-clear">
      <div class="ddp-col-6">
        <a href="javscript:" class="ddp-btn-line ddp-full">View column lineage</a>
      </div>
      <div class="ddp-col-6">
        <a href="javscript:" class="ddp-btn-solid ddp-bg-black ddp-full">Go to Metadata</a>
      </div>
    </div>
  </div>

  <div class="ddp-wrap-part ddp-bg">
    <div class="ddp-ui-preview">
      <div class="ddp-txt-title">
        Data preview
      </div>

      <div class="ddp-box-preview">
        <metadata-grid-component></metadata-grid-component>
      </div>
    </div>

    <dl class="ddp-dl-detail">
      <dt>
        Type
      </dt>
      <dd>
        {{selectedNode.metadata.sourceType}}
      </dd>
    </dl>
    <dl class="ddp-dl-detail">
      <dt>
        Size
      </dt>
      <dd>
        {{selectedNode.metadata.columns.length}}
      </dd>
    </dl>
  </div>

  <div class="ddp-wrap-date">
    <dl class="ddp-dl-detail type-date">
      <dt>
        Created on
      </dt>
      <dd>
        {{selectedNode.metadata.createdTime}} <span class="ddp-data-by">by {{selectedNode.metadata.createdBy.username}}</span>
      </dd>
    </dl>
    <dl class="ddp-dl-detail type-date">
      <dt>
        Updated on
      </dt>
      <dd>
        {{selectedNode.metadata.modifiedTime}} <span class="ddp-data-by">by {{selectedNode.metadata.modifiedBy.username}}</span>
      </dd>
    </dl>
  </div>

  <!--
  <div #columnList *ngIf="this.selectedNode.metadata">
    <ul>
      <li *ngFor="let column of this.selectedNode.metadata.columns">
        <span>{{column.name}}</span> ( <span>{{column.type}}</span> )
      </li>
    </ul>
  </div>
  -->
</div>
